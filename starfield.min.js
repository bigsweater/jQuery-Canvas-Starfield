!function(t){var e={},r={starColor:"rgba(255,255,255,1)",bgColor:"rgba(0,0,0,1)",mouseColor:"rgba(0,0,0,0.2)",mouseSpeed:20,fps:15,speed:5,quantity:512,ratio:256,"class":"starfield"};t.fn.starfield=function(n){function s(){var t=d.width(),e=d.height();return Array(t,e)}function a(){t('<canvas class="'+c.settings.class+'" width="'+v+'" height="'+w+'"></canvas>').appendTo(d);for(var e=0;y>e;e++)E[e]=new Array(5),E[e][0]=2*Math.random()*v-2*p,E[e][1]=2*Math.random()*w-2*O,E[e][2]=Math.round(Math.random()*b),E[e][3]=0,E[e][4]=0;var r=t("canvas",d);r.width=v,r.height=w,h=r[0].getContext("2d"),h.fillStyle=c.settings.bgColor,h.strokeStyle=c.settings.starColor}function o(){I=T-p,$=S-O,h.fillRect(0,0,v,w);for(var t=0;y>t;t++)g=!0,_=E[t][3],f=E[t][4],E[t][0]+=I>>4,E[t][0]>p<<1&&(E[t][0]-=v<<1,g=!1),E[t][0]<-p<<1&&(E[t][0]+=v<<1,g=!1),E[t][1]+=$>>4,E[t][1]>O<<1&&(E[t][1]-=w<<1,g=!1),E[t][1]<-O<<1&&(E[t][1]+=w<<1,g=!1),E[t][2]-=k,E[t][2]>b&&(E[t][2]-=b,g=!1),E[t][2]<0&&(E[t][2]+=b,g=!1),E[t][3]=p+E[t][0]/E[t][2]*M,E[t][4]=O+E[t][1]/E[t][2]*M,_>0&&v>_&&f>0&&w>f&&g&&(h.lineWidth=2*(1-z*E[t][2]),h.beginPath(),h.moveTo(_,f),h.lineTo(E[t][3],E[t][4]),h.stroke(),h.closePath());m=setTimeout("anim()",D)}function i(t){t=t||event;var e=document.documentElement;T=t.pageX||t.clientX+e.scrollLeft-e.clientLeft,S=t.pageY||t.clientY+e.scrollTop-e.clientTop}function u(){l(),o()}function l(){v=parseInt(-1!=x.indexOf("w=")?x.substring(x.indexOf("w=")+2,-1!=x.substring(x.indexOf("w=")+2,x.length).indexOf("&")?x.indexOf("w=")+2+x.substring(x.indexOf("w=")+2,x.length).indexOf("&"):x.length):s()[0]),w=parseInt(-1!=x.indexOf("h=")?x.substring(x.indexOf("h=")+2,-1!=x.substring(x.indexOf("h=")+2,x.length).indexOf("&")?x.indexOf("h=")+2+x.substring(x.indexOf("h=")+2,x.length).indexOf("&"):x.length):s()[1]),p=Math.round(v/2),O=Math.round(w/2),b=(v+w)/2,z=1/b,T=p,S=O,a()}if(0==this.length)return this;if(this.length>1)return this.each(function(){$this.starfield(n)}),this;var c={},d=this;e.el=this,c.settings=t.extend({},r,n);var _,f,h,m,x=document.location.href,y=parseInt(-1!=x.indexOf("n=")?x.substring(x.indexOf("n=")+2,-1!=x.substring(x.indexOf("n=")+2,x.length).indexOf("&")?x.indexOf("n=")+2+x.substring(x.indexOf("n=")+2,x.length).indexOf("&"):x.length):c.settings.quantity),g=!0,v=d.width(),w=d.height(),p=0,O=0,b=0,z=0,M=c.settings.ratio,k=c.settings.speed,E=new Array(y),T=0,S=0,I=0,$=0,D=c.settings.fps;window.anim=o,document.onmousemove=i,u(),t(window).resize(function(){l()}),t(window).mousedown(function(){h.fillStyle=c.settings.mouseColor,speed=c.settings.mouseSpeed}),t(window).mouseup(function(){h.fillStyle=c.settings.bgColor,speed=c.settings.speed})}}(jQuery);