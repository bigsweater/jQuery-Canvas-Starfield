!function(t){var e={},r={starColor:"rgba(255,255,255,1)",bgColor:"rgba(0,0,0,1)",mouseColor:"rgba(0,0,0,0.2)",mouseSpeed:20,fps:15,speed:5,quantity:512,ratio:256,"class":"starfield"};t.fn.starfield=function(n){function s(){var t=d.width(),e=d.height();return Array(t,e)}function a(){v=t(d).width(),w=t(d).height(),t('<canvas class="'+c.settings.class+'" width="'+v+'" height="'+w+'"></canvas>').appendTo(d);for(var e=0;y>e;e++)T[e]=new Array(5),T[e][0]=2*Math.random()*v-2*p,T[e][1]=2*Math.random()*w-2*O,T[e][2]=Math.round(Math.random()*b),T[e][3]=0,T[e][4]=0;var r=t("canvas",d);r.width=v,r.height=w,h=r[0].getContext("2d"),h.fillStyle=c.settings.bgColor,h.strokeStyle=c.settings.starColor}function o(){I=E-p,C=S-O,h.fillRect(0,0,v,w);for(var t=0;y>t;t++)g=!0,f=T[t][3],_=T[t][4],T[t][0]+=I>>4,T[t][0]>p<<1&&(T[t][0]-=v<<1,g=!1),T[t][0]<-p<<1&&(T[t][0]+=v<<1,g=!1),T[t][1]+=C>>4,T[t][1]>O<<1&&(T[t][1]-=w<<1,g=!1),T[t][1]<-O<<1&&(T[t][1]+=w<<1,g=!1),T[t][2]-=k,T[t][2]>b&&(T[t][2]-=b,g=!1),T[t][2]<0&&(T[t][2]+=b,g=!1),T[t][3]=p+T[t][0]/T[t][2]*M,T[t][4]=O+T[t][1]/T[t][2]*M,f>0&&v>f&&_>0&&w>_&&g&&(h.lineWidth=2*(1-z*T[t][2]),h.beginPath(),h.moveTo(f,_),h.lineTo(T[t][3],T[t][4]),h.stroke(),h.closePath());x=setTimeout("anim()",$)}function i(t){t=t||event;var e=document.documentElement;E=t.pageX||t.clientX+e.scrollLeft-e.clientLeft,S=t.pageY||t.clientY+e.scrollTop-e.clientTop}function u(){l(),o()}function l(){v=parseInt(-1!=m.indexOf("w=")?m.substring(m.indexOf("w=")+2,-1!=m.substring(m.indexOf("w=")+2,m.length).indexOf("&")?m.indexOf("w=")+2+m.substring(m.indexOf("w=")+2,m.length).indexOf("&"):m.length):s()[0]),w=parseInt(-1!=m.indexOf("h=")?m.substring(m.indexOf("h=")+2,-1!=m.substring(m.indexOf("h=")+2,m.length).indexOf("&")?m.indexOf("h=")+2+m.substring(m.indexOf("h=")+2,m.length).indexOf("&"):m.length):s()[1]),p=Math.round(v/2),O=Math.round(w/2),b=(v+w)/2,z=1/b,E=p,S=O,a()}if(0==this.length)return this;if(this.length>1)return this.each(function(){$this.starfield(n)}),this;var c={},d=this;e.el=this,c.settings=t.extend({},r,n);var f,_,h,x,m=document.location.href,y=parseInt(-1!=m.indexOf("n=")?m.substring(m.indexOf("n=")+2,-1!=m.substring(m.indexOf("n=")+2,m.length).indexOf("&")?m.indexOf("n=")+2+m.substring(m.indexOf("n=")+2,m.length).indexOf("&"):m.length):c.settings.quantity),g=!0,v=0,w=0,p=0,O=0,b=0,z=0,M=c.settings.ratio,k=c.settings.speed,T=new Array(y),E=0,S=0,I=0,C=0,$=c.settings.fps;window.anim=o,document.onmousemove=i,u(),t(window).resize(function(){l()}),t(window).mousedown(function(){h.fillStyle=c.settings.mouseColor,speed=c.settings.mouseSpeed}),t(window).mouseup(function(){h.fillStyle=c.settings.bgColor,speed=c.settings.speed})}}(jQuery);