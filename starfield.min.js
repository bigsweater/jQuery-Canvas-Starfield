!function(t){var e={},r={starColor:"rgba(255,255,255,1)",bgColor:"rgba(0,0,0,1)",mouseColor:"rgba(0,0,0,0.2)",mouseSpeed:20,fps:15,speed:5,quantity:512,ratio:256,"class":"starfield"};t.fn.starfield=function(n){function s(){y=t(c).width(),v=t(c).height(),t('<canvas class="'+l.settings.class+'" width="'+y+'" height="'+v+'"></canvas>').appendTo(c);for(var e=0;x>e;e++)k[e]=new Array(5),k[e][0]=2*Math.random()*y-2*w,k[e][1]=2*Math.random()*v-2*p,k[e][2]=Math.round(Math.random()*O),k[e][3]=0,k[e][4]=0;var r=t("canvas",c);r.width=y,r.height=v,_=r[0].getContext("2d"),_.fillStyle=l.settings.bgColor,_.strokeStyle=l.settings.starColor}function a(){S=T-w,I=E-p,_.fillRect(0,0,y,v);for(var t=0;x>t;t++)g=!0,d=k[t][3],f=k[t][4],k[t][0]+=S>>4,k[t][0]>w<<1&&(k[t][0]-=y<<1,g=!1),k[t][0]<-w<<1&&(k[t][0]+=y<<1,g=!1),k[t][1]+=I>>4,k[t][1]>p<<1&&(k[t][1]-=v<<1,g=!1),k[t][1]<-p<<1&&(k[t][1]+=v<<1,g=!1),k[t][2]-=M,k[t][2]>O&&(k[t][2]-=O,g=!1),k[t][2]<0&&(k[t][2]+=O,g=!1),k[t][3]=w+k[t][0]/k[t][2]*z,k[t][4]=p+k[t][1]/k[t][2]*z,d>0&&y>d&&f>0&&v>f&&g&&(_.lineWidth=2*(1-b*k[t][2]),_.beginPath(),_.moveTo(d,f),_.lineTo(k[t][3],k[t][4]),_.stroke(),_.closePath());h=setTimeout("anim()",C)}function o(t){t=t||event;var e=document.documentElement;T=t.pageX||t.clientX+e.scrollLeft-e.clientLeft,E=t.pageY||t.clientY+e.scrollTop-e.clientTop}function i(){u(),a()}function u(){y=t(c).width(),v=t(c).height(),w=Math.round(y/2),p=Math.round(v/2),O=(y+v)/2,b=1/O,T=w,E=p,t("canvas",c).remove(),s()}if(0==this.length)return this;if(this.length>1)return this.each(function(){$this.starfield(n)}),this;var l={},c=this;e.el=this,l.settings=t.extend({},r,n);var d,f,_,h,m=document.location.href,x=parseInt(-1!=m.indexOf("n=")?m.substring(m.indexOf("n=")+2,-1!=m.substring(m.indexOf("n=")+2,m.length).indexOf("&")?m.indexOf("n=")+2+m.substring(m.indexOf("n=")+2,m.length).indexOf("&"):m.length):l.settings.quantity),g=!0,y=0,v=0,w=0,p=0,O=0,b=0,z=l.settings.ratio,M=l.settings.speed,k=new Array(x),T=0,E=0,S=0,I=0,C=l.settings.fps;window.anim=a,document.onmousemove=o,i(),t(window).resize(function(){u()}),t(window).mousedown(function(){_.fillStyle=l.settings.mouseColor,speed=l.settings.mouseSpeed}),t(window).mouseup(function(){_.fillStyle=l.settings.bgColor,speed=l.settings.speed})}}(jQuery);